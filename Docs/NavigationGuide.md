# Навигация в FilmLab

## Обзор архитектуры навигации

Приложение использует двухуровневую систему навигации:

1. **HomeView** - главный экран с кнопками для выбора функций
2. **MainTabView** - контейнер с табами для основных функций

## Структура навигации

### ContentView
- Управляет переключением между HomeView и MainTabView
- Содержит состояние `showMainTabs` для определения текущего экрана
- Содержит состояние `selectedTab` для выбранного таба

### HomeView
- Отображает 4 основные функции:
  - **Presets** (индекс 0) - настройка параметров проявки
  - **Calculator** (индекс 1) - калькулятор времени
  - **Timer** (индекс 2) - таймер проявки
  - **Journal** (индекс 3) - журнал записей

### MainTabView
- Содержит TabView с 4 табами
- Каждый таб соответствует функции из HomeView
- Имеет кнопку "Назад к дому" для возврата к HomeView

## Потоки навигации

### 1. Home → MainTab
```swift
HomeView.onSelectTab { tab in
    selectedTab = tab
    showMainTabs = true
}
```

### 2. MainTab → Home
```swift
MainTabView.onBackToHome {
    showMainTabs = false
}
```

### 3. Sheet навигация
Многие экраны открываются как sheet:
- **TimerView** - из DevelopmentSetupView и CalculatorView
- **SettingsView** - из HomeView через toolbar
- **Picker views** - из DevelopmentSetupView

## Состояние навигации

### ContentView
- `@State private var showMainTabs = false`
- `@State private var selectedTab = 0`

### MainTabView
- `@Binding var selectedTab: Int`
- `var onBackToHome: () -> Void`

## Изменения после удаления Manuals

### Удаленные элементы:
1. Кнопка Manuals из HomeView (индекс 4)
2. Логика показа ManualView в MainTabView
3. Состояние `showManuals` в MainTabView

### Оставшиеся элементы:
- ManualView остается в коде для будущего использования
- Файлы ManualView.swift и связанные компоненты сохранены

## Тестирование навигации

### Созданные тесты:
1. **NavigationTests.swift** - базовые тесты навигации
2. **NavigationFlowTests.swift** - тесты потоков навигации
3. **IntegrationTests.swift** - интеграционные тесты

### Ключевые тестируемые сценарии:
- Переход от HomeView к MainTabView
- Переключение между табами
- Возврат к HomeView
- Открытие sheet'ов
- Обработка ошибок навигации

## Рекомендации по разработке

### Добавление новых экранов:
1. Добавить кнопку в HomeView (обновить ForEach и функции)
2. Добавить таб в MainTabView
3. Создать соответствующие тесты

### Изменение навигации:
1. Обновить ContentView для управления новым состоянием
2. Обновить тесты для проверки новых потоков
3. Обновить документацию

## Потенциальные проблемы

### Известные проблемы:
1. Нет проверки валидности индексов табов
2. Нет обработки ошибок при некорректных данных
3. Нет анимаций переходов между экранами

### Рекомендации по улучшению:
1. Добавить валидацию индексов табов
2. Добавить обработку ошибок
3. Добавить анимации переходов
4. Добавить UI тесты для проверки фактических нажатий 